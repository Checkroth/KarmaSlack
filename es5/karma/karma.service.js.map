{"version":3,"sources":["karma/karma.service.js"],"names":[],"mappings":"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","file":"karma.service.js","sourcesContent":["import KarmaModel from './karma.model.js'; \n\nexport default class KarmaService {\n\t\n\tconstructor() {\n\t\t\n\t}\n\t\n\t//Add Karma record\n\t\n\tadd(teamId, userId, amount){\t\t\n\t\t\n\t\treturn new Promise((res,rej) =>{\n\t\t\t\n\t\t\treturn KarmaModel.changeOrCreate(teamId, userId, amount)\n\t\t\t.then(() => {\n\t\t\t\treturn this.userCount(teamId, userId, \"increased\")\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\tres(data);\n\t\t\t\t\t\t}).catch((err)=>{\n\t\t\t\t\t\t\trej(`Error retrieving karma for <@${userId}>.`);\n\t\t\t\t\t\t});\n\t\t\t},()=>{\n\t\t\t\trej(`Error adding karma for <@${userId}>.`);\n\t\t\t});\n\t\t});\n\t}\n\t\n\t//Remove Karma record\n\t\n\tremove(teamId, userId, amount){\n\t\t\n\t\treturn new Promise((res,rej) =>{\n\t\t\treturn KarmaModel.changeOrCreate(teamId, userId, amount)\t\n\t\t\t.then(() => {\n\t\t\t\treturn this.userCount(teamId, userId, \"decreased\")\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\tres(data);\n\t\t\t\t\t\t}).catch((err)=>{\n\t\t\t\t\t\t\trej(`Error retrieving karma for <@${userId}>.`);\n\t\t\t\t\t\t});\n\t\t\t\t\t},() =>{\n\t\t\t\t\t\t\trej(`Error removing karma for <@${userId}>.`);\n\t\t\t\t});\n\t\t\t});\n\t\t\n\t\tfunction whenNoRecordFound (userId){\n\t  \n\t\t\treturn Promise.resolve(`<@${userId}> needs some positive karma from you first.`);\n\t\t};\n\t\t\n\t\tfunction fromSelf (){\n\t\t  \n\t\t\treturn Promise.resolve(`Don't be so hard on yourself.`);\n\t\t};\n\t}\n\t\n\t//Get Karma count for user\n\t\n\tuserCount(teamId, userId, incDec){\n  \n\t\treturn new Promise((res,rej) =>{\n\t\t\tKarmaModel.getUserPoints(teamId, userId)\n\t\t\t.then((user) => {\n\t\t\t\tvar responseText = `<@${userId}> has a karma of ${user.karmaPoints}.`; \t\t \n\t\t\n\t\t\t\tif(incDec){\n\t\t\t\t\tresponseText = `<@${userId}> has ${incDec} their karma to ${user.karmaPoints}.`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tres(responseText);\n\t\t\t}).catch(()=>{\n\t\t\t\trej(`Error retrieving karma for <@${userId}>.`);\n\t\t\t});\n\t\t});\n\t}\n\t\n\t//Get Karma count for team\n\n\tteamCount(teamId){\n\t\t\n\t\treturn new Promise((res,rej) =>{\n\t\t\tKarmaModel.getTeamPoints(teamId)\n\t\t\t.then((collection) => {\n\n\t\t\t\tfor(var u in collection) {\n\t\t\t\t\tresponseText += `<@${u.userId}: ${u.karmaPoints} \\n`\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar responseText = 'Karma Totals: \\n';\n\t\t\t\tres(responseText);\n\t\t\t}).catch(()=>{\n\t\t\t\trej('Error retrieving karma for team.');\n\t\t\t});\n\t\t});\n\t}\n}"],"sourceRoot":"/home/checkroth/Documents/Projects/KarmaSlack/es6"}